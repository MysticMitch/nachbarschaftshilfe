<%- include("header") -%>

<h1>Mein Profil</h1>

<div class="card mb-3" style="max-width: 540px;">
    <div class="row g-0">
      <div class="col-md-4">
    <img src="/public/user.png" class="card-img-top" alt="..." style="max-height: 260px; max-width:310px;">
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title"><%=daten.person[1] + " " + daten.person[2]%></h5>
          <% let metadaten = ["Nutzername", "Vorname", "Nachname", "Telefonnr.", "Heldenpunkte", "Wohnort", "Postleitzahl", "Straße", "Hausnr."]; %>
          <table style="width:100%">
            <% for(let i = 0; i < daten.person.length; i++){ %>
                
                <%if(i == 1 || i == 2){
                    continue;
                }%>
                <tr class="card-text">
                    <th><%=metadaten[i]%></th>
                    <th><%=daten.person[i]%></th>
                  </tr>
                  <% } %>
          </table>
          
          <form method="POST" action="profil">
            <button name=anpassen value="Ok" class="btn btn-primary">Anpassen</button>
            <button name=ehrenhalle value="Ok" class="btn btn-primary">Hall of Fame</button>
          </form></div></div></div></div>



<h1>Aufgenommene Einkaufslisten</h1>     

<% let produktzeile = ""; %>
<% for (let [key, values] of daten.arbeit) { %>

    <div class="card mb-3" style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-md-4">
        <img src="/public/index.png" class="card-img-top" alt="..." style="max-height: 260px; max-width:310px;">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><%=values[0].name + " #" + key%></h5>

              <ul>
              <% for(let index = 0; index < values.length; index++){ %>
                <% produktzeile = ""; %>

                
              <% if(values[index].menge){produktzeile += values[index].menge + "x "}%>
              <% produktzeile += values[index].bezeichnung%>
              <% if(values[index].kilogramm){produktzeile += " (" + values[index].kilogramm + "kg) "}%>
              <% if(values[index].liter){produktzeile += " (" + values[index].liter + "L) "}%>
              <% if(values[index].marke){produktzeile += " von der Marke " + values[index].marke}%>  


              <li class="card-text"><%=produktzeile%></li>
              
               

              <% } %>   
            </ul>


              <form method="POST" action="fertigOderZuruck">
              <button name=fertig value=<%=key%> class="btn btn-primary">Abschließen</button>
              <button name=zuruck value=<%=key%> class="btn btn-primary">Zurücklegen</button>
            </form>
            </div>
          </div>
        </div>
      </div>
    
<% } %>

<br><br>

<h1>Aufgegebene Einkaufslisten</h1>   
   
<% produktzeile = ""; %>
<% for (let [key, values] of daten.listen) { %>

    <div class="card mb-3" style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-md-4">
        <img src="/public/index.png" class="card-img-top" alt="..." style="max-height: 260px; max-width:310px;">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><%=values[0].name + " #" + key%></h5>

              <ul>
              <% for(let index = 0; index < values.length; index++){ %>
                <% produktzeile = ""; %>

                
              <% if(values[index].menge){produktzeile += values[index].menge + "x "}%>
              <% produktzeile += values[index].bezeichnung%>
              <% if(values[index].kilogramm){produktzeile += " (" + values[index].kilogramm + "kg) "}%>
              <% if(values[index].liter){produktzeile += " (" + values[index].liter + "L) "}%>
              <% if(values[index].marke){produktzeile += " von der Marke " + values[index].marke}%>


              <li class="card-text"><%=produktzeile%></li>
              
               

              <% } %>   
            </ul>


              <form method="POST" action="entfernen">
              <button name=liste value=<%=key%> class="btn btn-primary">Löschen</button>
            </form>
            </div>
          </div>
        </div>
      </div>
    
<% } %>

<br><br>


                   
<%- include("footer") -%>